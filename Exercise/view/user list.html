<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <title>Edit appointment</title>
    <link rel="stylesheet" type="text/css" href="../../bootstrap/css/bootstrap.min.css">
    <link rel="stylesheet" href="../../fontawesome/css/fontawesome-all.min.css">
    <script src="../../jquery/jquery-3.3.1.min.js"></script>
    <script src="../../bootstrap/js/popper.min.js"></script>
    <script src="../../bootstrap/js/bootstrap.min.js"></script>
    <style>
        * {
            margin: 0;
            padding: 0;
        }

        body, html {
            width: 1850px;
            height: 100%;
        }

        nav {
            background: linear-gradient(to top right, #e8e8e8, #b3b3b3);
            height: 40px;
        }

        .main-content{
            background-image: url("../image/mian-bg2.gif");
            padding-bottom: 30%;
            padding-top: 2%;
        }


        .left{
            width: 208px;
            transition: width 2s;
        }
        .right{
            width: calc(100% - 208px);
            transition: width 2s;
        }

        .collapsed{
            width: 0px;
        }

        .collap{
            width: 100%;
        }


        .menu-item{
            background-color: #000000;
            height: 94%;
        }

        .menu-item img{
            border-image: black;
        }
        .group-1{
            margin-left: 40px;

        }
        .group-2{
            margin-left: 40px;
            margin-top: 30px;
        }

        .group-1 ul {
            list-style: none;
        }

        .group-2 ul {
            list-style: none;
        }

        .group-1 ul li a{
            width: 130px;height: 63px;
            display: inline-block;
        }

        .group-2 ul li a{
            width: 130px;height: 63px;
            display: inline-block;
        }

        .bg-logout {
            width: 130px; height: 63px;
            background: url('../image/css_sprites.png') -10px -93px;
        }

        .bg-logout:hover{
            width: 130px; height: 63px;
            background: url('../image/css_sprites.png') -10px -674px;
        }

        .bg-manual_icon {
            width: 131px; height: 64px;
            background: url('../image/css_sprites.png') -10px -840px;
        }

        .bg-room {
            width: 130px; height: 63px;
            background: url('../image/css_sprites.png') -10px -176px;
        }

        .bg-room:hover{
            width: 130px; height: 63px;
            background: url('../image/css_sprites.png') -10px -10px;
        }

        .bg-schedule {
            width: 130px; height: 63px;
            background: url('../image/css_sprites.png') -10px -259px;
        }

        .bg-schedule:hover{
            width: 130px; height: 63px;
            background: url('../image/css_sprites.png') -10px -757px;
        }

        .bg-reserve_over {
            width: 130px; height: 63px;
            background: url('../image/css_sprites.png') -10px -342px;
        }

        .bg-manual_icon_white {
            width: 131px; height: 64px;
            background: url('../image/css_sprites.png') -10px -924px;
        }

        .bg-manual_icon_white:hover{
            width: 131px; height: 64px;
            background: url('../image/css_sprites.png') -10px -840px;
        }

        .bg-reserve {
            width: 130px; height: 63px;
            background: url('../image/css_sprites.png') -10px -508px;
        }

        .bg-reserve:hover{
            width: 130px; height: 63px;
            background: url('../image/css_sprites.png') -10px -342px;
        }

        .bg-room_over {
            width: 130px; height: 63px;
            background: url('../image/css_sprites.png') -10px -10px;
        }

        .bg-logout_over {
            width: 130px; height: 63px;
            background: url('../image/css_sprites.png') -10px -674px;
        }

        .bg-schedule_over {
            width: 130px; height: 63px;
            background: url('../image/css_sprites.png') -10px -757px;
        }

        .bg-setup {
            width: 130px; height: 63px;
            background: url('../image/css_sprites.png') -10px -591px;
        }

        .bg-setup:hover{
            width: 130px; height: 63px;
            background: url('../image/css_sprites.png') -10px -425px;
        }

        .bg-setup_over {
            width: 130px; height: 63px;
            background: url('../image/css_sprites.png') -10px -425px;
        }

        .bg-top1 {
            width: 131px; height: 64px;
            background: url('../image/css_sprites.png') -10px -1008px;
        }

        .bg-top1:hover{
            width: 131px; height: 64px;
            background: url('../image/css_sprites.png') -10px -1092px;
        }

        .bg-top2 {
            width: 131px; height: 64px;
            background: url('../image/css_sprites.png') -10px -1092px;
        }


        .language{
            width: 130px;
            text-align: center;
            color: #00af82;
            margin-left: 20px;
        }
        .content{
            background-color: #303030;
            color: #ffffff;
            width: 90%;
            margin-left: 2%;
        }

        #nav_menu_top{
            margin-left: 20px;
            margin-bottom: 10px;
            width: 20%;
            font-size: 15px;
        }
        #nav_menu_top a{
            color: #ffffff;
        }
        #nav_menu_top a.active{
            background-color: #375a7f;
        }
        table{
            font-size: 14px;
        }
        table span.edit-btn{
            background-color: #444444;
            padding: 10%;

        }
        table span.delete-btn{
            padding: 10%;
            background-color: #e74c3b;

        }
        table span i{
            font-size: 70%;
        }
        .label-confirm{
            color: black;
            background-color: #ffffff;
            text-align: center;
            width: 100%;
        }

        .modal {
            display:    none;
            position:   fixed;
            z-index:    1000;
            top:        0;
            left:       0;
            height:     100%;
            width:      100%;
            background: rgba( 255, 255, 255, .8 )
            url('../image/ajax-loader.gif')
            50% 50%
            no-repeat;
        }

        body.loading .modal {
            overflow: hidden;
        }

        body.loading .modal {
            display: block;
        }


    </style>
</head>
<body id="body">
<div class="wrapper">
    <div class="row">
        <div class="left">
            <div class="logo">
                <img src="../image/navi_logo.gif" >
            </div>
            <div class="user-login">
                <img src="../image/login.gif">
            </div>
            <div class="menu-item">
                <div class="group-1">
                    <ul>
                        <li class="bg-schedule">
                            <a href="#"></a>
                        </li>
                        <li class="bg-reserve">
                            <a href="#"></a>
                        </li>
                        <li class="bg-setup">
                            <a href="#"></a>
                        </li>
                        <li class="bg-room">
                            <a href="#"></a>
                        </li>
                        <li class="bg-manual_icon_white ">
                            <a href="#"></a>
                        </li>
                    </ul>
                </div>
                <div class="group-2">
                    <ul>
                        <li class="bg-top1">
                            <a href="#"></a>
                        </li>
                        <li class="bg-logout">
                            <a href="#"></a>
                        </li>
                    </ul>
                    <div class="language row">
                        <div class="change_lang col-md-4">
                            <a>EN</a>
                        </div>
                        <div class="change_lang col-md-4">
                            <a>JP</a>
                        </div>
                    </div>


                </div>
            </div>
        </div>
        <div class="right ">
            <header>
                <nav class="navbar navbar-expand-sm bg-light">
                    <ul class="navbar-nav">
                        <li class="nav-item" id="toggle_item">
                            <a class="nav-link"><i class="fas fa-bars "></i></a>
                        </li>
                        <li class="nav-item">
                            <a class="nav-link" href="#">Setting</a>
                        </li>

                    </ul>
                </nav>
            </header>
            <div class="main-content">
                <div id="nav_menu_top" class="mx-auto">
                    <ul class="nav nav-pills nav-fill">
                        <li class="nav-item">
                            <a class="nav-link active" href="#">User list</a>
                        </li>
                        <li class="nav-item">
                            <a class="nav-link" href="#">Add user</a>
                        </li>

                    </ul>
                </div>
                <div class="content">
                    <table class="table table-bordered" id="user_table">
                        <thead>
                        <tr>
                            <th>Username</th>
                            <th>Display name</th>
                            <th>Email 1</th>
                            <th>Email 2</th>
                            <th>Is Chairman</th>
                            <th>Is Admin</th>
                            <th>Self order
                                <br/>
                                <label class="label-confirm">Confirm</label>
                            </th>
                            <th>Action</th>
                        </tr>
                        </thead>
                        <tbody>
                        <tr>
                            <td>donamkhanh</td>
                            <td>Nam Khanh Do</td>
                            <td>donamkhanh@gmail.com.vn</td>
                            <td>me@donamkhanh.com</td>
                            <td>Yes</td>
                            <td>Yes</td>
                            <td><label class="label-confirm">0</label></td>
                            <td>
                                <span class="edit-btn"><i class="fas fa-edit"></i></span>
                                <span class="delete-btn"><i class="fas fa-trash"></i></span>
                            </td>
                        </tr>
                        <tr>
                            <td>khanhdn</td>
                            <td>Nam Khanh Do</td>
                            <td>donamkhanh@gmail.com</td>
                            <td>donamkhanh@gmail.com.it</td>
                            <td>Yes</td>
                            <td>Yes</td>
                            <td><label class="label-confirm">0</label></td>
                            <td>
                                <span class="edit-btn"><i class="fas fa-edit"></i></span>
                                <span class="delete-btn"><i class="fas fa-trash"></i></span>
                            </td>
                        </tr>

                        </tbody>
                    </table>

                </div>

                <div class="pagin">
                    <ul class="pagination" id="pagination">
                        <!--<li class="page-item"><a class="page-link" href="#">Previous</a></li>-->
                        <!--<li class="page-item"><a class="page-link" href="#">1</a></li>-->
                        <!--<li class="page-item"><a class="page-link" href="#">2</a></li>-->
                        <!--<li class="page-item"><a class="page-link" href="#">3</a></li>-->
                        <!--<li class="page-item"><a class="page-link" href="#">Next</a></li>-->
                    </ul>
                </div>

            </div>

            <div class="modal"></div>

        </div>
    </div>

</div>

<script>
    $('#toggle_item').click(function () {
        $('.left').toggleClass('collapsed');
        $('.right').toggleClass('collap');
    });

    var xmlhttp = new XMLHttpRequest();
    var url = "https://training.gemvietnam.com/dummy-api/users.json";

    xmlhttp.onreadystatechange = function() {
        if (this.readyState == 4 && this.status == 200) {
            var myArr = JSON.parse(this.responseText);
            var current_page = 1;
            var limit = 10;

            drawTable(myArr,current_page,limit);

            function getEventTarget(e) {
                e = e || window.event;
                return e.target || e.srcElement;
            }

            var ul = document.getElementById('pagination');
            ul.onclick = function(event) {
                var target = getEventTarget(event);
                current_page = target.innerHTML;
                drawTable(myArr,current_page,limit);
                console.log(current_page);
                // loading icon
                var body = document.getElementById('body');
                body.classList.add("loading");
                setTimeout(function(){
                    body.classList.remove("loading");
                }, 3000);


            };

        }
    };
    xmlhttp.open("GET", url, true);
    xmlhttp.send();

    function drawTable(arr,page,limit) {
        var total_page = Math.ceil(arr.length / limit);
        var data = "";
        var i;
        var table = document.getElementById('user_table').getElementsByTagName('tbody')[0];

        if (page < 1) page = 1;
        if (page > total_page) page = total_page;

        for (i= (page-1)*limit; i < page*limit ; i++){
            var chairMan = arr[i].is_chairman;
            var admin = arr[i].is_admin;
            if (chairMan == 0){
                chairMan = "No";
            }else if (chairMan == 1){
                chairMan = "Yes";
            }

            if (admin == 0){
                admin = "No";
            }else if (admin == 1){
                admin = "Yes";
            }

            data += "<tr>";
            data += "<td>"+ arr[i].username +"</td>";
            data += "<td>"+ arr[i].display_name +"</td>";
            data += "<td>"+ arr[i].email +"</td>";
            data += "<td>"+ arr[i].email_alt +"</td>";
            data += "<td>"+ chairMan +"</td>";
            data += "<td>"+ admin +"</td>"
            data += "<td><label class=\"label-confirm\">"+ arr[i].order +"</label></td>";
            data += "<td>" +
                "<span class=\"edit-btn\"><i class=\"fas fa-edit\"></i></span>" +
                "<span class=\"delete-btn\"><i class=\"fas fa-trash\"></i></span>" +
                "</td>";
        }
        table.innerHTML = data;
        pagination(total_page);
        display_btn(page,total_page);
    }

    function pagination(total_page) {
        var pagin = document.getElementById('pagination');
        var html = "";
        var prev = "<li class=\"page-item\" id='prev'><a class=\"page-link\">Previous</a></li>";
        var next = "<li class=\"page-item\" id='next'><a class=\"page-link\">Next</a></li>";
        var link = "";
        var i;
        for (i=1; i <= total_page; i++){
            link += "<li class=\"page-item\"><a class=\"page-link\" href=\"#\">"+i+"</a></li>";
        }
        html += prev;
        html += link;
        html += next;

        pagin.innerHTML = html;
    }
    
    function display_btn(page,total_page) {
        var btn_prev = document.getElementById('prev');
        var btn_next = document.getElementById('next');

        if (page == 1){
            btn_prev.style.visibility = "hidden";
        }else {
            btn_prev.style.visibility = "visible";
        }

        if (page == total_page){
            btn_next.style.visibility = "hidden";
        }else {
            btn_next.style.visibility = "visible";
        }
    }

</script>
</body>
</html>